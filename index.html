<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Breathing Lung</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <h1>Breathing Lung</h1>

    <svg
      id="lungSvg"
      width="260"
      height="260"
      viewBox="0 0 260 260"
      xmlns="http://www.w3.org/2000/svg"
    >
      <!-- background -->
      <defs>
        <radialGradient id="bgGrad" cx="50%" cy="25%" r="70%">
          <stop offset="0%" stop-color="#111827" />
          <stop offset="70%" stop-color="#020617" />
          <stop offset="100%" stop-color="#000000" />
        </radialGradient>

        <radialGradient id="lungFillGrad" cx="50%" cy="60%" r="60%">
          <stop offset="0%" stop-color="#4ade80" stop-opacity="0.9" />
          <stop offset="70%" stop-color="#22c55e" stop-opacity="0.7" />
          <stop offset="100%" stop-color="#166534" stop-opacity="0.3" />
        </radialGradient>
      </defs>

      <circle cx="130" cy="130" r="120" fill="url(#bgGrad)" />

      <!-- trachea -->
      <rect x="121" y="28" width="18" height="44" rx="7" fill="#4b5563" />

      <!-- diaphragm (morphing) -->
      <path
        id="diaphragm"
        d="M40 188 Q130 210 220 188 Q130 220 40 188 Z"
        fill="#020617"
        stroke="#1f2937"
        stroke-width="2"
      />

      <!-- reference shapes for morph (hidden) -->
      <g id="refs" style="display:none">
        <!-- relaxed diaphragm -->
        <path
          id="dia-small"
          d="M40 188 Q130 210 220 188 Q130 220 40 188 Z"
        />
        <!-- pushed-down diaphragm on inhale -->
        <path
          id="dia-big"
          d="M40 200 Q130 225 220 200 Q130 235 40 200 Z"
        />

        <!-- relaxed lungs (smaller) -->
        <path
          id="lung-small"
          d="
            M120 68
            C 82 70, 60 105, 62 150
            C 64 190, 86 210, 112 210
            C 118 210, 122 206, 124 198
            C 126 186, 126 140, 126 110
            C 126 86, 124 72, 120 68
            Z

            M140 68
            C 178 70, 200 105, 198 150
            C 196 190, 174 210, 148 210
            C 142 210, 138 206, 136 198
            C 134 186, 134 140, 134 110
            C 134 86, 136 72, 140 68
            Z
          "
        />

        <!-- expanded lungs (wider, longer) -->
        <path
          id="lung-big"
          d="
            M118 60
            C 70 62, 50 108, 52 156
            C 54 204, 82 222, 112 224
            C 120 224, 126 218, 128 206
            C 130 190, 130 142, 130 104
            C 130 80, 126 64, 118 60
            Z

            M142 60
            C 190 62, 210 108, 208 156
            C 206 204, 178 222, 148 224
            C 140 224, 134 218, 132 206
            C 130 190, 130 142, 130 104
            C 130 80, 134 64, 142 60
            Z
          "
        />
      </g>

      <!-- active lung path we will morph -->
      <path
        id="lung-path"
        d="
          M120 68
          C 82 70, 60 105, 62 150
          C 64 190, 86 210, 112 210
          C 118 210, 122 206, 124 198
          C 126 186, 126 140, 126 110
          C 126 86, 124 72, 120 68
          Z

          M140 68
          C 178 70, 200 105, 198 150
          C 196 190, 174 210, 148 210
          C 142 210, 138 206, 136 198
          C 134 186, 134 140, 134 110
          C 134 86, 136 72, 140 68
          Z
        "
        fill="url(#lungFillGrad)"
        fill-opacity="0.12"
        stroke="#6b7280"
        stroke-width="3"
      />

      <!-- bronchial tree (lights up when full) -->
      <g id="bronchi" stroke-linecap="round" stroke-linejoin="round">
        <path
          d="M130 72 L130 110
             M130 88 L116 108
             M130 96 L144 114
             M126 120 L112 138
             M134 120 L148 138
             M118 150 L106 168
             M142 150 L154 168"
          stroke="#86efac"
          stroke-width="2"
          opacity="0.0"
        />
      </g>
    </svg>

    <div class="status">
      <div id="phase">Get Ready</div>
      <div id="timer">3.0</div>
    </div>

    <button id="startBtn">Start Cycle</button>

    <div class="hint">
      Inhale as lungs expand and glow, hold at the top, exhale as they shrink and dim.
    </div>
  </div>

  <!-- GSAP + MorphSVG -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/MorphSVGPlugin.min.js"></script>

  <script src="script.js"></script>
</body>
</html>
